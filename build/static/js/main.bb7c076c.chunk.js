(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{18:function(e,t,n){e.exports=n(40)},40:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(17),c=n.n(o),l=n(2),u=n(7),i=n(3),m=function(e){var t=e.setter;return a.a.createElement("section",null,a.a.createElement("label",null,"filter shown with ",a.a.createElement("input",{onChange:function(e){var n=e.target.value;return t(n)}})))},s=function(e){var t=e.addPerson,n=Object(r.useState)({name:"",number:""}),o=Object(i.a)(n,2),c=o[0],u=o[1];return a.a.createElement("form",{onSubmit:t({newPerson:c,cleanInputs:function(){u({name:"",number:""})}})},a.a.createElement("label",null,"name: ",a.a.createElement("input",{value:c.name,onChange:function(e){var t=e.target.value;u(Object(l.a)({},c,{name:t}))}})),a.a.createElement("br",null),a.a.createElement("label",null,"number: ",a.a.createElement("input",{value:c.number,onChange:function(e){var t=e.target.value;u(Object(l.a)({},c,{number:t}))}})),a.a.createElement("br",null),a.a.createElement("button",{type:"submit"},"add"))},d=function(e){var t=e.person,n=t.name,r=t.number,o=e.removePerson;return a.a.createElement(a.a.Fragment,null,a.a.createElement("tr",null,a.a.createElement("td",null,n),a.a.createElement("td",null,r),a.a.createElement("td",null,a.a.createElement("button",{onClick:o},"delete"))))},f=function(e){var t=e.list,n=void 0===t?[]:t,r=e.removePerson;return a.a.createElement("section",null,a.a.createElement("h2",null,"Numbers"),a.a.createElement("table",null,a.a.createElement("tbody",null,n.map((function(e){return a.a.createElement(d,{key:e.id,person:e,removePerson:r(e)})})))))},b=n(5),E=n.n(b),p="/api/persons",h=function(){return E.a.get(p).then((function(e){return Object(u.a)(e.data)}))},v=function(e){return E.a.post(p,e).then((function(e){return e.data}))},g=function(e){return E.a.delete("".concat(p,"/").concat(e))},j=function(e){return E.a.put("".concat(p,"/").concat(e.id),e).then((function(e){return e.data}))},O=function(e){var t=e.notification,n=t.txt,r=t.full,o=t.isError;if(!n)return null;var c={background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},u=Object(l.a)({},c,{color:"red"}),i=Object(l.a)({},c,{color:"darkgreen"});return a.a.createElement("div",{style:o?u:i},n,r?a.a.createElement("p",null,r):null)},C=function(){var e=Object(r.useState)([]),t=Object(i.a)(e,2),n=t[0],o=t[1],c=Object(r.useState)(""),d=Object(i.a)(c,2),b=d[0],E=d[1],p=Object(r.useState)(""),C=Object(i.a)(p,2),w=C[0],P=C[1];Object(r.useEffect)((function(){h().then((function(e){return o(Object(u.a)(e))}))}),[]);var k,x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{txt:"",full:"",isError:!1};P(e),setTimeout((function(){return P({txt:""})}),e.full?1e4:5e3)};return a.a.createElement("div",null,a.a.createElement("h2",null,"Phonebook"),a.a.createElement(O,{notification:w}),a.a.createElement(m,{setter:E}),a.a.createElement("h2",null,"add a new"),a.a.createElement(s,{addPerson:function(e){var t=e.newPerson,r=e.cleanInputs;return function(e){e.preventDefault();var a=n.filter((function(e){return e.name.toUpperCase()===t.name.toUpperCase()}));a.length>0?window.confirm("".concat(t.name," is already added to the phonebook, replace the old number with a new one?"))&&j(Object(l.a)({},a[0],{number:t.number})).then((function(e){o(n.map((function(t){return t.id===e.id?e:t}))),x({txt:"Changed ".concat(e.name)})})).catch((function(e){console.error("Error Creating Person",e),x({txt:"Could not update ".concat(t.name),full:e.response.data.error,isError:!0})})):(v(t).then((function(e){o(n.concat([e])),x({txt:"Added ".concat(e.name)})})).catch((function(e){console.error("Error Creating Person",e),x({txt:"Could not create ".concat(t.name),full:e.response.data.error,isError:!0})})),r())}}}),a.a.createElement(f,{list:n.filter((k=b,k?function(e){return e.name.toUpperCase().includes(k.toUpperCase())}:function(){return!0})),removePerson:function(e){var t=e.name,r=e.id;return function(){window.confirm("Delete ".concat(t," ?"))&&g(r).then((function(){o(n.filter((function(e){return e.id!==r}))),x({txt:"Deleted ".concat(t)})})).catch((function(e){console.error("Error Creating Person",e),x({txt:"Could not delete ".concat(t),full:e.response.data,isError:!0})}))}}}))};c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(C,null)),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.bb7c076c.chunk.js.map