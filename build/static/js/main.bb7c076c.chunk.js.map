{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","services/personService.js","components/Notification.js","App.js","index.js"],"names":["Filter","setter","onChange","value","target","PersonForm","addPerson","useState","name","number","newPerson","setPerson","onSubmit","cleanInputs","type","Person","person","removePerson","onClick","Persons","list","map","key","id","baseUrl","axios","get","then","response","data","post","delete","put","Notification","notification","txt","full","isError","defaultStyle","background","fontSize","borderStyle","borderRadius","padding","marginBottom","errorStyle","color","noteStyle","style","App","persons","setPersons","filter","setFilter","setNotification","useEffect","personService","searchTerm","sendNotification","note","setTimeout","event","preventDefault","preExistingPerson","p","toUpperCase","length","window","confirm","updatedPerson","catch","err","console","error","createdPerson","concat","includes","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.bb7c076c.chunk.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst Filter = ({ setter }) => {\n  const handleFilterChange = ({ target: { value } }) => setter(value);\n\n  return (\n    <section>\n      <label>filter shown with <input onChange={handleFilterChange} /></label>\n    </section>\n  );\n};\n\nFilter.propTypes = {\n  setter: PropTypes.func\n};\n\nexport default Filter;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\n\n\nconst PersonForm = ({ addPerson }) => {\n  const [newPerson, setPerson] = useState({ name: '', number: '' });\n\n  const setName = ({ target: { value } }) => {\n    setPerson({\n      ...newPerson,\n      name: value\n    });\n  };\n\n  const setNumber = ({ target: { value } }) => {\n    setPerson({\n      ...newPerson,\n      number: value\n    });\n  };\n\n  const cleanInputs = () => {\n    setPerson({ name: '', number: '' });\n  };\n\n  return (\n    <form onSubmit={addPerson({ newPerson, cleanInputs })}>\n      <label>name: <input value={newPerson.name} onChange={setName} /></label><br />\n      <label>number: <input value={newPerson.number} onChange={setNumber} /></label><br />\n      <button type=\"submit\">add</button>\n    </form>\n  );\n};\n\nPersonForm.propTypes = {\n  addPerson: PropTypes.func\n};\n\nexport default PersonForm;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst Person = ({ person: { name, number }, removePerson }) => {\n\n  return (\n    <>\n      <tr>\n        <td>{name}</td>\n        <td>{number}</td>\n        <td><button onClick={removePerson}>delete</button></td>\n      </tr>\n    </>\n  );\n};\n\nconst Persons = ({ list = [], removePerson }) => {\n\n  return (\n    <section>\n      <h2>Numbers</h2>\n      <table>\n        <tbody>\n          {list.map(person => <Person key={person.id} person={person} removePerson={removePerson(person)} />)}\n        </tbody>\n      </table>\n    </section>\n  );\n};\n\nPerson.propTypes = {\n  person: {\n    name: PropTypes.string.isRequired,\n    number: PropTypes.string.isRequired\n  },\n  removePerson: PropTypes.func\n};\n\nPersons.propTypes = {\n  list: PropTypes.array,\n  removePerson: PropTypes.func\n};\n\n\nexport default Persons;\n","import axios from 'axios';\nconst baseUrl = '/api/persons';\n\nconst getAll = () => axios\n  .get(baseUrl)\n  .then(response => [...response.data]);\n\nconst create = person => axios\n  .post(baseUrl, person)\n  .then(response => response.data);\n\nconst remove = id => axios\n  .delete(`${baseUrl}/${id}`);\n\nconst update = person => axios\n  .put(`${baseUrl}/${person.id}`, person)\n  .then(response => response.data);\n\nexport default { getAll, create, remove, update };\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst Notification = ({ notification: { txt, full, isError } }) => {\n  if (!txt) {\n    return null;\n  }\n\n  const defaultStyle = {\n    background: 'lightgrey',\n    fontSize: 20,\n    borderStyle: 'solid',\n    borderRadius: 5,\n    padding: 10,\n    marginBottom: 10\n  };\n\n  const errorStyle = {\n    ...defaultStyle,\n    color: 'red',\n  };\n\n  const noteStyle = {\n    ...defaultStyle,\n    color: 'darkgreen'\n  };\n\n  return (\n    <div style={isError ? errorStyle : noteStyle}>\n      {txt}\n      {full ? <p>{full}</p> : null}\n    </div>\n  );\n\n};\n\nNotification.propTypes = {\n  notification: {\n    txt: PropTypes.string,\n    full: PropTypes.string,\n    isError: PropTypes.bool\n  }\n};\n\nexport default Notification;\n","import React, { useState, useEffect } from 'react';\nimport Filter from './components/Filter';\nimport PersonForm from './components/PersonForm';\nimport Persons from './components/Persons';\nimport personService from './services/personService';\nimport Notification from './components/Notification';\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [filter, setFilter] = useState('');\n  const [notification, setNotification] = useState('');\n\n  useEffect(() => {\n    const eventHandler = response => setPersons([...response]);\n\n    personService.getAll()\n      .then(eventHandler);\n\n  }, []);\n\n  const sendNotification = (note = { txt: '', full: '', isError: false }) => {\n    setNotification(note);\n    setTimeout(() => setNotification({ txt: '' }), note.full ? 10000 : 5000);\n  };\n\n  const addPerson = ({ newPerson, cleanInputs }) => (event) => {\n    event.preventDefault();\n\n    const preExistingPerson = persons.filter(p => p.name.toUpperCase() === newPerson.name.toUpperCase());\n    if (preExistingPerson.length > 0) {\n      if (window.confirm(`${newPerson.name} is already added to the phonebook, replace the old number with a new one?`)) {\n        personService\n          .update({ ...preExistingPerson[0], number: newPerson.number })\n          .then(updatedPerson => {\n            setPersons(persons.map(person => person.id === updatedPerson.id ? updatedPerson : person));\n            sendNotification({ txt: `Changed ${updatedPerson.name}` });\n          })\n          .catch(err => {\n            console.error('Error Creating Person', err);\n            sendNotification({\n              txt: `Could not update ${newPerson.name}`,\n              full: err.response.data.error,\n              isError: true\n            });\n          });\n      }\n      return;\n    }\n\n    personService\n      .create(newPerson)\n      .then(createdPerson => {\n        setPersons(persons.concat([createdPerson]));\n        sendNotification({ txt: `Added ${createdPerson.name}` });\n      }).catch(err => {\n        console.error('Error Creating Person', err);\n        sendNotification({\n          txt: `Could not create ${newPerson.name}`,\n          full: err.response.data.error,\n          isError: true\n        });\n      });\n    cleanInputs();\n  };\n\n\n  const removePerson = ({ name, id }) => () => {\n    if (window.confirm(`Delete ${name} ?`)) {\n      personService\n        .remove(id)\n        .then(() => {\n          setPersons(persons.filter(({ id: personId }) => personId !== id));\n          sendNotification({ txt: `Deleted ${name}` });\n        })\n        .catch(err => {\n          console.error('Error Creating Person', err);\n          sendNotification({\n            txt: `Could not delete ${name}`,\n            full: err.response.data,\n            isError: true\n          });\n        });\n    }\n  };\n\n\n  const personFilter = (searchTerm) => searchTerm ?\n    (person) => person.name.toUpperCase().includes(searchTerm.toUpperCase()) :\n    () => true;\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification notification={notification} />\n      <Filter setter={setFilter} />\n      <h2>add a new</h2>\n      <PersonForm addPerson={addPerson} />\n      <Persons list={persons.filter(personFilter(filter))} removePerson={removePerson} />\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}